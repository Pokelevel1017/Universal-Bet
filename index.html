<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Universal-Bet | Global Arena</title>
    <style>
        :root { 
            --dark-blue: #0b1120; --mid-blue: #1e293b; --light-blue: #38bdf8; 
            --accent-green: #00e701; --card-bg: #111827; --text-muted: #94a3b8;
            --premium-gradient: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            --modal-bg: #0f172a;
            --hot-orange: #fb923c;
        }

        body { background-color: var(--dark-blue); color: white; font-family: 'Inter', sans-serif; margin: 0; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }

        /* NAV */
        nav { background: #070b14; padding: 0 2rem; display: flex; justify-content: space-between; align-items: center; height: 75px; border-bottom: 1px solid var(--mid-blue); flex-shrink: 0; z-index: 100; }
        .logo { font-size: 1.5rem; font-weight: 900; letter-spacing: -1px; cursor: pointer; }
        .logo span { color: var(--light-blue); }
        .nav-right { display: flex; align-items: center; gap: 12px; }
        .header-reward-box { background: rgba(56, 189, 248, 0.1); border: 1px solid rgba(56, 189, 248, 0.2); padding: 8px 15px; border-radius: 8px; display: none; align-items: center; gap: 10px; cursor: pointer; transition: 0.2s; }
        .reward-timer-text { font-size: 11px; font-weight: 800; color: var(--light-blue); text-transform: uppercase; }
        .balance-box { background: var(--mid-blue); padding: 10px 20px; border-radius: 8px; font-weight: 800; color: var(--accent-green); display: flex; align-items: center; gap: 10px; font-size: 1.1rem; border: 1px solid rgba(56, 189, 248, 0.2); visibility: hidden; }

        /* LAYOUT */
        .main-content { display: flex; flex: 1; overflow: hidden; }
        .sidebar { width: 280px; background: #070b14; border-right: 1px solid var(--mid-blue); padding: 20px 12px; display: flex; flex-direction: column; gap: 6px; flex-shrink: 0; overflow-y: auto; }
        .sidebar-label { font-size: 11px; font-weight: 800; color: var(--text-muted); text-transform: uppercase; margin: 20px 0 10px 15px; letter-spacing: 1px; }
        .side-link { padding: 12px 15px; border-radius: 8px; color: var(--text-muted); text-decoration: none; font-weight: 600; transition: 0.2s; display: flex; align-items: center; gap: 12px; font-size: 14px; }
        .side-link:hover, .active-link { background: var(--mid-blue); color: white; }

        /* DASHBOARD */
        .dashboard { flex: 1; padding: 40px; overflow-y: auto; background: radial-gradient(circle at top left, #1e293b, #0b1120); }
        .status-header { margin-bottom: 30px; }
        .status-header h1 { font-size: 2.2rem; font-weight: 900; margin: 0; }
        .highlight { color: var(--light-blue); }

        /* TAB NAVIGATION */
        .tab-nav { display: flex; gap: 10px; border-bottom: 1px solid var(--mid-blue); margin-bottom: 30px; }
        .tab-btn { padding: 12px 24px; background: none; border: none; color: var(--text-muted); font-weight: 800; cursor: pointer; text-transform: uppercase; font-size: 13px; border-bottom: 2px solid transparent; transition: 0.2s; }
        .tab-btn.active { color: var(--light-blue); border-bottom-color: var(--light-blue); }
        .tab-content { display: none; }
        .tab-content.active { display: block; }

        /* GAMES GRID */
        .game-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 25px; }
        @media (max-width: 1100px) { .game-grid { grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); } }

        .game-card { background: var(--card-bg); border-radius: 20px; overflow: hidden; transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); cursor: pointer; border: 1px solid rgba(255,255,255,0.05); }
        .game-card:hover { transform: translateY(-10px); border-color: var(--light-blue); box-shadow: 0 15px 30px rgba(0,0,0,0.4); }
        .game-img-wrapper { width: 100%; height: 200px; display: flex; align-items: center; justify-content: center; font-size: 5rem; background: var(--premium-gradient); position: relative; }
        .game-info-v2 { padding: 20px; text-align: center; }
        .game-title { font-size: 1.4rem; font-weight: 900; margin: 0; color: #fff; }
        .game-multiplier { font-size: 11px; font-weight: 800; color: var(--hot-orange); text-transform: uppercase; margin-top: 8px; display: block; }

        /* LEADERBOARD */
        .leaderboard-table { width: 100%; border-collapse: collapse; background: var(--card-bg); border-radius: 12px; overflow: hidden; border: 1px solid var(--mid-blue); }
        .leaderboard-table th { background: #070b14; padding: 15px; color: var(--text-muted); text-align: left; font-size: 12px; text-transform: uppercase; }
        .leaderboard-table td { padding: 15px; border-top: 1px solid var(--mid-blue); }
        .bal-cell { color: var(--accent-green); font-weight: 800; text-align: right; }

        /* MODAL */
        .modal-overlay { position: fixed; inset: 0; background: rgba(2, 6, 23, 0.85); display: flex; align-items: center; justify-content: center; z-index: 1000; backdrop-filter: blur(12px); }
        .modal { background: var(--modal-bg); padding: 40px; border-radius: 24px; width: 420px; border: 1px solid rgba(56, 189, 248, 0.3); text-align: center; }
        .modal-icon { font-size: 3.5rem; margin-bottom: 20px; display: block; }
        .modal input { width: 100%; padding: 16px; border-radius: 12px; border: 2px solid var(--mid-blue); background: #070b14; color: white; text-align: center; font-size: 1.1rem; font-weight: 700; outline: none; box-sizing: border-box; }
        .btn-submit { width: 100%; background: var(--light-blue); color: var(--dark-blue); padding: 16px; border-radius: 12px; font-weight: 900; cursor: pointer; border: none; text-transform: uppercase; margin-top: 25px; }

        .footer { text-align: center; padding: 60px 0; color: #475569; font-weight: 700; font-size: 11px; letter-spacing: 3px; }
    </style>
</head>
<body>

<nav>
    <div class="logo" onclick="location.href='index.html'">UNIVERSAL<span>-BET</span></div>
    <div class="nav-right">
        <div class="header-reward-box" id="headerReward" onclick="claimBonus()">
            <span class="reward-icon">üéÅ</span>
            <span id="headerTimer" class="reward-timer-text">Loading...</span>
        </div>
        <div class="balance-box" id="balanceDisplay"><span id="navBal">$0.00</span></div>
    </div>
</nav>

<div class="main-content">
    <aside class="sidebar">
        <a href="index.html" class="side-link active-link"><span>üè†</span> Home</a>
        <div class="sidebar-label">Games</div>
        <a href="blackjack.html" class="side-link"><span>üÉè</span> Blackjack</a>
        <a href="dice.html" class="side-link"><span>üé≤</span> Dice</a>
        <a href="mines.html" class="side-link"><span>üí£</span> Mines</a>
        <a href="plinko.html" class="side-link"><span>üîÆ</span> Plinko</a>
        <a href="roulette.html" class="side-link"><span>üé°</span> Roulette</a>
        <a href="rps.html" class="side-link"><span>‚úä</span> Rock Paper Scissors</a>
        <a href="tower.html" class="side-link"><span>üóº</span> Tower</a>
    </aside>

    <main class="dashboard">
        <div class="status-header" id="headerContent">
            <h1>Welcome to <span class="highlight">Universal-Bet</span></h1>
            <p>Ready to climb the global ranks?</p>
        </div>

        <div class="tab-nav">
            <button class="tab-btn active" onclick="switchTab('games')">Popular Games</button>
            <button class="tab-btn" onclick="switchTab('leaderboard')">Leaderboard</button>
            <button class="tab-btn" onclick="switchTab('about')">About</button>
        </div>

        <div id="games" class="tab-content active">
            <div class="game-grid">
                <div class="game-card" onclick="location.href='blackjack.html'">
                    <div class="game-img-wrapper">üÉè</div>
                    <div class="game-info-v2">
                        <h3 class="game-title">Blackjack</h3>
                        <span class="game-multiplier">Up to 2.5x Payout</span>
                    </div>
                </div>
                <div class="game-card" onclick="location.href='mines.html'">
                    <div class="game-img-wrapper">üí£</div>
                    <div class="game-info-v2">
                        <h3 class="game-title">Mines</h3>
                        <span class="game-multiplier">Up to 1,000x Payout</span>
                    </div>
                </div>
                <div class="game-card" onclick="location.href='dice.html'">
                    <div class="game-img-wrapper">üé≤</div>
                    <div class="game-info-v2">
                        <h3 class="game-title">Dice</h3>
                        <span class="game-multiplier">High-Speed Slider</span>
                    </div>
                </div>
            </div>
        </div>

        <div id="leaderboard" class="tab-content">
            <table class="leaderboard-table">
                <thead>
                    <tr><th>Rank</th><th>Player</th><th style="text-align: right;">Balance</th></tr>
                </thead>
                <tbody id="leaderboardBody"></tbody>
            </table>
        </div>

        <div id="about" class="tab-content">
            <div class="about-box">
                <h3><span>üèÜ</span> About Universal-Bet</h3>
                <p>Welcome to <b>Universal-Bet</b>, a premier high-stakes platform. Our technology ensures that every win and daily bonus is instantly synced across your profile on any device.</p>
                <p>Compete to secure your spot on the <b>Leaderboard</b>. Your progress always saves to the cloud!</p>
                <hr style="border: 0; border-top: 1px solid var(--mid-blue); margin: 20px 0;">
                <p style="font-size: 13px;">Created by <b>FUSIONZZZ</b>.</p>
            </div>
        </div>

        <div class="footer">WEBSITE MADE BY FUSIONZZZ</div>
    </main>
</div>

<div class="modal-overlay" id="modalOverlay">
    <div class="modal">
        <span class="modal-icon">üë§</span>
        <h2>Enter Username</h2>
        <p>Use the same name on any device to sync your balance.</p>
        <input type="text" id="usernameInput" placeholder="Username..." maxlength="15">
        <button class="btn-submit" onclick="handleAuth()">Confirm & Enter</button>
    </div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyDAr9GqIDPWGw0ojEYPL1eigfMeqTGsfT0",
        authDomain: "universalbet-427ce.firebaseapp.com",
        databaseURL: "https://universalbet-427ce-default-rtdb.firebaseio.com",
        projectId: "universalbet-427ce",
        storageBucket: "universalbet-427ce.firebasestorage.app",
        messagingSenderId: "804592033030",
        appId: "1:804592033030:web:352d7f4e8a75fb3f215287"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    let currentLocalUser = null;

    function checkAuth() {
        const localUser = JSON.parse(localStorage.getItem('currentUser'));
        if (localUser && localUser.name) {
            currentLocalUser = localUser;
            document.getElementById('modalOverlay').style.display = 'none';
            db.ref('users/' + localUser.name.toLowerCase()).on('value', (snapshot) => {
                const cloudData = snapshot.val();
                if (cloudData) {
                    currentLocalUser = cloudData;
                    localStorage.setItem('currentUser', JSON.stringify(cloudData));
                    updateUI(cloudData);
                }
            });
        } else {
            document.getElementById('modalOverlay').style.display = 'flex';
        }
    }

    function handleAuth() {
        const nameInput = document.getElementById('usernameInput').value.trim();
        if (nameInput.length < 3) return alert("Username too short.");
        const name = nameInput.toLowerCase().replace(/[^a-z0-9]/g, "");

        db.ref('users/' + name).once('value').then((snapshot) => {
            if (snapshot.exists()) {
                // Syncs existing data across laptops
                localStorage.setItem('currentUser', JSON.stringify(snapshot.val()));
                location.reload();
            } else {
                // Start with $100 for new users
                const newUser = { name: name, balance: 100.00, lastBonus: 0 };
                db.ref('users/' + name).set(newUser).then(() => {
                    localStorage.setItem('currentUser', JSON.stringify(newUser));
                    location.reload();
                });
            }
        });
    }

    function updateUI(user) {
        document.getElementById('balanceDisplay').style.visibility = 'visible';
        document.getElementById('headerReward').style.display = 'flex';
        document.getElementById('navBal').innerText = `$${user.balance.toLocaleString(undefined, {minimumFractionDigits: 2})}`;
        document.getElementById('headerContent').innerHTML = `<h1>Welcome back, <span class="highlight">${user.name.toUpperCase()}</span>!</h1><p>Your high-stakes legacy is secured.</p>`;
        
        if (window.rewardInterval) clearInterval(window.rewardInterval);
        window.rewardInterval = setInterval(() => updateTimer(user), 1000);
        updateTimer(user);
    }

    function updateTimer(user) {
        const now = Date.now();
        const diff = (24 * 60 * 60 * 1000) - (now - (user.lastBonus || 0));
        const timerText = document.getElementById('headerTimer');
        const rewardBox = document.getElementById('headerReward');

        if (diff > 0) {
            const h = Math.floor(diff / 3600000);
            const m = Math.floor((diff % 3600000) / 60000);
            const s = Math.floor((diff % 60000) / 1000);
            timerText.innerText = `${h}H ${m}M ${s}S`;
            rewardBox.style.opacity = "0.5";
            rewardBox.style.cursor = "default";
        } else {
            timerText.innerText = "Claim $25.00";
            rewardBox.style.opacity = "1";
            rewardBox.style.cursor = "pointer";
        }
    }

    function claimBonus() {
        if (!currentLocalUser) return;
        const cooldown = 24 * 60 * 60 * 1000;
        if (Date.now() - (currentLocalUser.lastBonus || 0) < cooldown) return;

        db.ref('users/' + currentLocalUser.name.toLowerCase()).transaction((user) => {
            if (user) {
                user.balance = (user.balance || 0) + 25.00;
                user.lastBonus = Date.now();
            }
            return user;
        });
    }

    function switchTab(tabId) {
        document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
        event.currentTarget.classList.add('active');
        document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');
        if(tabId === 'leaderboard') fetchLeaderboard();
    }

    function fetchLeaderboard() {
        db.ref('users').orderByChild('balance').limitToLast(15).once('value', (snapshot) => {
            let users = [];
            snapshot.forEach((child) => { users.push(child.val()); });
            users.sort((a, b) => b.balance - a.balance);
            document.getElementById('leaderboardBody').innerHTML = users.map((u, i) => `
                <tr><td>#${i + 1}</td><td>${u.name.toUpperCase()}</td><td class="bal-cell">$${u.balance.toLocaleString(undefined, {minimumFractionDigits: 2})}</td></tr>`).join('');
        });
    }

    checkAuth();
</script>
</body>
</html>
